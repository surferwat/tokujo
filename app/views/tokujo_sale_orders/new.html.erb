<% content_for :title do %>
  <%= t("views.tokujo_sale_orders.new.checkout") %> - <%= t("views.tokujo_sale_orders.new.order_summary") %>
<% end %>

<div class="min-h-full flex flex-col justify-center py-12 lg:px-8">
  <div class="mt-8 sm:mx-auto sm:w-full sm:max-w-md">
    <div class="space-y-3">
      <p>  
        <%= t("views.tokujo_sale_orders.new.please_review_your_order_") %>
      </p>
    </div>

    <%= form_with class: "space-y-6", model: @order, url: tokujo_sale_orders_path do |form| %>
        <%= render partial: "shared/form_errors", locals: { form: form } %>

        <table class="min-w-full">        
          <tbody class="divide-y divide-gray-200">
            <tr>
              <%# <th scope="col" class="py-3.5 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0">Patron ID</th> %>
              <th scope="col" class="py-3.5 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0"><%= t("views.tokujo_sale_orders.new.patron_id") %></th>
              <td scope="col" class="py-3.5 px-3 text-left text-sm text-gray-900"><%= @patron_id %></th>
              <%= hidden_field_tag :patron_id, @patron_id %>
            </tr>
            <tr>
              <%# <th scope="col" class="py-3.5 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0">Tokujo ID</th> %>
              <th scope="col" class="py-3.5 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0"><%= t("views.tokujo_sale_orders.new.tokujo_id") %></th>
              <td scope="col" class="py-3.5 px-3 text-left text-sm text-gray-900"><%= @tokujo_id %></th>
              <%= form.hidden_field :tokujo_id, value: @tokujo_id %>
            </tr>
            <tr>
              <%# <th scope="col" class="py-3.5 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0">Name</th> %>
              <th scope="col" class="py-3.5 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0"><%= t("views.tokujo_sale_orders.new.name") %></th>
              <td scope="col" class="py-3.5 px-3 text-left text-sm text-gray-900"><%= @name %></th>
            </tr>
            <tr>
              <th scope="col" class="py-3.5 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0"><%= t("views.tokujo_sale_orders.new.description") %></th>
              <td scope="col" class="py-3.5 px-3 text-left text-sm text-gray-900"><%= @description %></th>
            </tr>
            <tr>
              <%# <th scope="col" class="py-3.5 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0">Currency</th> %>
              <th scope="col" class="py-3.5 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0"><%= t("views.tokujo_sale_orders.new.currency") %></th>
              <td scope="col" class="py-3.5 px-3 text-left text-sm text-gray-900"><%= @payment_amount_currency %></th>
              <%= form.hidden_field :payment_amount_currency, value: @payment_amount_currency %>
            </tr>
            <tr>
              <%# <th scope="col" class="py-3.5 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0">Price (incl. tax)</th> %>
              <th scope="col" class="py-3.5 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0"><%= t("views.tokujo_sale_orders.new.price_incl_tax") %></th>
              <td scope="col" class="py-3.5 px-3 text-left text-sm text-gray-900"><%= render partial: "shared/price", locals: { price: @price_with_tax, with_tax_text: false } %></th>
            </tr>
            <tr>
              <%# <th scope="col" class="py-3.5 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0">Order size</th> %>
              <th scope="col" class="py-3.5 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0"><%= t("views.tokujo_sale_orders.new.order_size") %></th>
              <td scope="col" class="py-3.5 px-3 text-left text-sm text-gray-900"><%= @size %></th>
              <%= form.hidden_field :size, value: @size %>
            </tr>
            <tr>
              <%# <th scope="col" class="py-3.5 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0">Total Price (incl. tax)</th> %>
              <th scope="col" class="py-3.5 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0"><%= t("views.tokujo_sale_orders.new.total_price") %></th>
              <td scope="col" class="py-3.5 px-3 text-left text-sm text-gray-900"><%= render partial: "shared/price", locals: { price: @total_price_with_tax, with_tax_text: false } %></th>
              <%= form.hidden_field :payment_amount, value: @total_price_with_tax %>
            </tr>
          </tbody>
        </table>

        <%= hidden_field_tag :checkout_session_id, @checkout_session_id %>
        
        <div class="grid gap-2 sm:flex sm:flex-row-reverse">
          <%# data: { turbo: false } is hack to make Stripe Checkout work with Rails 7 %>
          <%= form.submit @button_label, data: { turbo: false } %>
          <%= render partial: "shared/button_outline", locals: { text: t("views.tokujo_sale_orders.new.back"), href: tokujo_sale_path(@tokujo) } %>
        </div>

      <% end %>
  </div>
</div>