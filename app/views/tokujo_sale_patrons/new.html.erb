<% content_for :title do %>
  Checkout - Provide Email Address
<% end %>

<div class="min-h-full flex flex-col justify-center py-12 lg:px-8">
  <div class="mt-8 sm:mx-auto sm:w-full sm:max-w-md">
    <div class="space-y-3">
      <p>
        Please provide your email address where we can send you an email with 
        updates about the status of this Tokujo as well as your order. 
      </p>
    </div>

    <%= form_with class: "space-y-6", model: @user_patron, method: "post", url: tokujo_sale_patrons_path(tokujo_id: @tokujo.id, user_patron_id: @user_patron.id, size: @size, total_price_with_tax: @total_price_with_tax) do |form| %>
      <%= render partial: "shared/form_errors", locals: { form: form } %>
      
      <div class="mt-12 space-y-2 sm:mx-auto sm:max-w-lg">
        <%= form.label :email, nil, class: "block text-sm font-medium text-slate-800" %>
        <%= form.email_field :email, placeholder: "email@example.com", class: "w-full px-3 py-3 border border-slate-400 rounded-md shadow-sm text-base focus:outline-none focus:ring-slate-900 focus:border-slate-900" %>
      </div>

      <%= hidden_field_tag :checkout_session_id, @checkout_session_id %>
      <div class="grid gap-2 sm:flex sm:flex-row-reverse">
        <%# data: { turbo: false } is hack to make Stripe Checkout work with Rails 7 %>
        <%= form.submit "Next", data: { turbo: false } %>
        <%= render partial: "shared/button_outline", locals: { text: "Back", href: tokujo_sale_path(@tokujo) } %>
      </div>
    <% end %>

  </div>
</div>


